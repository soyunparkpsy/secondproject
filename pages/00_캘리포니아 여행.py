import streamlit as st
import folium
from streamlit_folium import st_folium
import pandas as pd

st.set_page_config(page_title="μΊλ¦¬ν¬λ‹μ•„ κ΄€κ΄‘ κ°€μ΄λ“", layout="wide")

st.title("π΄ μΊλ¦¬ν¬λ‹μ•„ κ΄€κ΄‘ & λ§›μ§‘ & μ™μ† κ°€μ΄λ“")
st.markdown("""
λ―Έκµ­ μ„λ¶€μ λ³΄μ„, **μΊλ¦¬ν¬λ‹μ•„** π„β€β™€οΈ  
κ΄€κ΄‘λ…μ†λ¶€ν„° ν„μ§€μΈ λ§›μ§‘, κ·Έλ¦¬κ³  νΈμ•ν• μ™μ†κΉμ§€, μ΄ κ°€μ΄λ“ ν•λ‚λ©΄ μ—¬ν–‰ μ¤€λΉ„ λ!
""")

# κ΄€κ΄‘μ§€, λ§›μ§‘, μ™μ† λ°μ΄ν„° (DataFrameμΌλ΅ κ΄€λ¦¬)
locations_data = {
    "name": [
        "μƒν”„λ€μ‹μ¤μ½” κΈλ¬Έκµ", "μΈμ•¤μ•„μ›ƒ λ²„κ±° (In-N-Out)", "μ”μ„Έλ―Έν‹° κµ­λ¦½κ³µμ›",
        "ν•„μ¦ μ»¤ν”Ό (Philz Coffee)", "λ””μ¦λ‹λλ“ λ¦¬μ΅°νΈ", "Roscoe's Chicken and Waffles",
        "μƒλ””μ—μ΄κ³  λΌνΈμ•Ό λΉ„μΉ", "κ·Έλ¦¬ν”Όμ¤ μ²λ¬Έλ€", "μ‚°νƒ€λ¨λ‹μΉ΄ ν”Όμ–΄", "κ²ν‹° μ„Όν„°",
        "νμ–΄λ¬νΈ μƒν”„λ€μ‹μ¤μ½”", "λ” λΉ„λ²λ¦¬ νμ¤ νΈν…”", "μ”μ„Έλ―Έν‹° λ°Έλ¦¬ λ΅―μ§€", "λ§¨μ²΄μ¤ν„° κ·Έλλ“ ν•μ–νΈ μƒλ””μ—μ΄κ³ "
    ],
    "type": [
        "κ΄€κ΄‘μ§€", "λ§›μ§‘", "κ΄€κ΄‘μ§€", "λ§›μ§‘", "κ΄€κ΄‘μ§€", "λ§›μ§‘", "κ΄€κ΄‘μ§€", "κ΄€κ΄‘μ§€", "κ΄€κ΄‘μ§€", "κ΄€κ΄‘μ§€",
        "μ™μ†", "μ™μ†", "μ™μ†", "μ™μ†"
    ],
    "desc": [
        "μ„Έκ³„μ—μ„ κ°€μ¥ μ•„λ¦„λ‹¤μ΄ ν„μκµ μ¤‘ ν•λ‚. μΈμƒμƒ· λ…μ†π“Έ",
        "μΊλ¦¬ν¬λ‹μ•„μ κµ­λ―Όλ²„κ±°! λΉ„λ°€ λ©”λ‰΄ β€μ• λ‹λ©€ μ¤νƒ€μΌβ€™ κΌ­ λ„μ „π”",
        "λ€μμ—°μ κ²½μ΄λ΅μ›€μ΄ νΌμ³μ§€λ” μ κ²½μ κµ­λ¦½κ³µμ›β›°οΈ",
        "μ§μ ‘ λΈ”λ λ”©ν• κ°μ„±μλ” μ»¤ν”Όβ• λ΅μ»¬ κ°μ„± μ¶©λ§!",
        "κΏκ³Ό ν™μƒμ λ‚λΌ! κ°€μ΅± λ‹¨μ„ μ—¬ν–‰κ°μ—κ² μ¶”μ²πΆ",
        "ν”„λΌμ΄λ“ μΉν‚¨ + μ™€ν”μ ν™©ν™€ν• μ΅°ν•©π—π§‡",
        "λ°”λ‹¤μ‚¬μλ„ κµ¬κ²½ν•κ³ , μ—λ©”λ„λ“λΉ› λ°”λ‹¤μ—μ„ νλ§π¬",
        "ν• λ¦¬μ°λ“ μ‚¬μΈμ„ λ³Ό μ μλ” μµκ³ μ λ·°ν¬μΈνΈ. LA μ•Όκ²½ κ°μƒμ— μµκ³ !πƒ",
        "νƒν‰μ–‘μ μ•„λ¦„λ‹¤μ΄ λ…Έμ„μ„ κ°μƒν•λ©° μ¦κΈΈ μ μλ” LA λ€ν‘ ν•΄λ³€ μ μ›μ§€π΅",
        "μ›…μ¥ν• κ±΄μ¶•λ¬Όκ³Ό μ„Έκ³„μ μΈ μμ  μ‘ν’λ“¤μ„ λ¬΄λ£λ΅ κ°μƒν•  μ μλ” κ³³π›οΈ",
        "μƒν”„λ€μ‹μ¤μ½”μ μƒμ§•μ μΈ λ­μ…”λ¦¬ νΈν…”, μ•„λ¦„λ‹¤μ΄ λ„μ‹ μ „λ§ μ κ³µπ¨",
        "ν• λ¦¬μ°λ“ μ¤νƒ€λ“¤μ΄ μ‚¬λ‘ν•λ” μ—­μ‚¬μ μΈ λ­μ…”λ¦¬ νΈν…”. κ³ κΈ‰μ¤λ¬μ΄ ν΄μ‹μ„ μ¦κ²¨λ³΄μ„Έμ”!β¨",
        "μ”μ„Έλ―Έν‹° κµ­λ¦½κ³µμ› λ‚΄μ— μ„μΉν• μ™μ†λ΅ μ£Όμ” λ…μ† μ ‘κ·Όμ„±μ΄ λ›°μ–΄λ‚©λ‹λ‹¤π•οΈ",
        "μƒλ””μ—μ΄κ³  λ‹¤μ΄νƒ€μ΄μ— μ„μΉν• λ€ν• νΈν…”, μ•„λ¦„λ‹¤μ΄ λ² μ΄ μ „λ§μ΄ μΌν’μ…λ‹λ‹¤π"
    ],
    "lat": [
        37.8199, 37.8080, 37.8651, 37.7749, 33.8121, 34.0900, 32.8500, 34.1185, 34.0089, 34.0781,
        37.7922, 34.0768, 37.7479, 32.7099
    ],
    "lon": [
        -122.4783, -122.4098, -119.5383, -122.4194, -117.9190, -118.3446, -117.2720, -118.3004, -118.4984, -118.4757,
        -122.4106, -118.4116, -119.6644, -117.1654
    ]
}
df = pd.DataFrame(locations_data)

st.markdown("---")

## π“ μ–΄λ””λ΅ λ– λ‚λ³ΌκΉμ”?

### π—ΊοΈ κ΄€κ΄‘μ§€, λ§›μ§‘, μ™μ† μ„μΉ

# μ‚¬μ΄λ“λ°” μ¶”κ°€
st.sidebar.header("ν•„ν„°λ§ μµμ…")
# μ‚¬μ©μ μ…λ ¥: μ§€μ—­ μ„ νƒ
city_options = ["μ „μ²΄"] + sorted(list(set(["μƒν”„λ€μ‹μ¤μ½”", "λ΅μ¤μ•¤μ ¤λ μ¤", "μ”μ„Έλ―Έν‹°", "μƒλ””μ—μ΄κ³ "])))
selected_city = st.sidebar.selectbox("λ„μ‹ μ„ νƒ:", city_options)

# μ‚¬μ©μ μ…λ ¥: μΉ΄ν…κ³ λ¦¬ μ„ νƒ
type_options = ["μ „μ²΄"] + list(df["type"].unique())
selected_type = st.sidebar.selectbox("μΉ΄ν…κ³ λ¦¬ μ„ νƒ:", type_options)

# λ°μ΄ν„° ν•„ν„°λ§
filtered_df = df.copy()
if selected_city != "μ „μ²΄":
    # λ„μ‹λ³„ μ¥μ† λ¶„λ¥ λ΅μ§ μ—…λ°μ΄νΈ (μ™μ† ν¬ν•¨)
    if selected_city == "μƒν”„λ€μ‹μ¤μ½”":
        filtered_df = filtered_df[filtered_df["name"].isin(["μƒν”„λ€μ‹μ¤μ½” κΈλ¬Έκµ", "μΈμ•¤μ•„μ›ƒ λ²„κ±° (In-N-Out)", "ν•„μ¦ μ»¤ν”Ό (Philz Coffee)", "νμ–΄λ¬νΈ μƒν”„λ€μ‹μ¤μ½”"])]
    elif selected_city == "λ΅μ¤μ•¤μ ¤λ μ¤":
        filtered_df = filtered_df[filtered_df["name"].isin(["λ””μ¦λ‹λλ“ λ¦¬μ΅°νΈ", "Roscoe's Chicken and Waffles", "κ·Έλ¦¬ν”Όμ¤ μ²λ¬Έλ€", "μ‚°νƒ€λ¨λ‹μΉ΄ ν”Όμ–΄", "κ²ν‹° μ„Όν„°", "λ” λΉ„λ²λ¦¬ νμ¤ νΈν…”"])]
    elif selected_city == "μ”μ„Έλ―Έν‹°":
        filtered_df = filtered_df[filtered_df["name"].isin(["μ”μ„Έλ―Έν‹° κµ­λ¦½κ³µμ›", "μ”μ„Έλ―Έν‹° λ°Έλ¦¬ λ΅―μ§€"])]
    elif selected_city == "μƒλ””μ—μ΄κ³ ":
        filtered_df = filtered_df[filtered_df["name"].isin(["μƒλ””μ—μ΄κ³  λΌνΈμ•Ό λΉ„μΉ", "λ§¨μ²΄μ¤ν„° κ·Έλλ“ ν•μ–νΈ μƒλ””μ—μ΄κ³ "])]

if selected_type != "μ „μ²΄":
    filtered_df = filtered_df[filtered_df["type"] == selected_type]

# μ§€λ„ μ΄κΈ°ν™” (ν•„ν„°λ§λ λ°μ΄ν„°μ μ¤‘μ•™μ„ κΈ°μ¤€μΌλ΅)
if not filtered_df.empty:
    center_lat = filtered_df["lat"].mean()
    center_lon = filtered_df["lon"].mean()
    m = folium.Map(location=[center_lat, center_lon], zoom_start=6)
else:
    m = folium.Map(location=[36.7783, -119.4179], zoom_start=6) # μΊλ¦¬ν¬λ‹μ•„ μ¤‘μ•™

# λ§μ»¤ μ¶”κ°€
for idx, loc in filtered_df.iterrows():
    if loc["type"] == "κ΄€κ΄‘μ§€":
        icon_color = "blue"
    elif loc["type"] == "λ§›μ§‘":
        icon_color = "red"
    else: # μ™μ†
        icon_color = "green" # μ™μ†λ” μ΄λ΅μƒ‰μΌλ΅ ν‘μ‹
    
    folium.Marker(
        location=[loc["lat"], loc["lon"]],
        popup=f"<b>{loc['name']}</b><br>{loc['desc']}",
        tooltip=loc["name"],
        icon=folium.Icon(color=icon_color)
    ).add_to(m)

st_data = st_folium(m, width=1000, height=600)

st.markdown("---")

## β¨ μ„Έλ¶€ μ •λ³΄ λ° μ¶”μ²

# ν•„ν„°λ§λ κ²°κ³Ό λ©λ΅ μ¶λ ¥
if not filtered_df.empty:
    st.markdown("### π“ μ„ νƒλ μ¥μ† λ©λ΅:")
    for idx, row in filtered_df.iterrows():
        st.markdown(f"- **{row['name']}** ({row['type']}): {row['desc']}")
else:
    st.info("μ„ νƒν•μ‹  μ΅°κ±΄μ— ν•΄λ‹Ήν•λ” μ¥μ†κ°€ μ—†μµλ‹λ‹¤. λ‹¤λ¥Έ ν•„ν„°λ¥Ό μ‹λ„ν•΄ λ³΄μ„Έμ”.")

st.markdown("---")

st.markdown("### β„ΉοΈ Tip")
st.info("μ§€λ„μ—μ„ λ§μ»¤λ¥Ό ν΄λ¦­ν•λ©΄ μ„¤λ…μ΄ λ‚μ™€μ”. λ§›μ§‘μ€ **λΉ¨κ°„μƒ‰**, κ΄€κ΄‘μ§€λ” **νλ€μƒ‰**, **μ™μ†λ” μ΄λ΅μƒ‰**μ΄μ—μ”. μ™Όμ½ μ‚¬μ΄λ“λ°”μ—μ„ μ›ν•λ” **λ„μ‹**μ™€ **μΉ΄ν…κ³ λ¦¬**λ¥Ό μ„ νƒν•μ—¬ λ§μ¶¤ μ •λ³΄λ¥Ό ν™•μΈν•΄ λ³΄μ„Έμ”!")
